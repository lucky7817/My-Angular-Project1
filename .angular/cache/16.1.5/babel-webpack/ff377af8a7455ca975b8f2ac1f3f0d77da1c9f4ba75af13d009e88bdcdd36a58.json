{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let PictureDetailsComponent = class PictureDetailsComponent {\n  backToList(ddd) {\n    this.router.navigate([`/picture/${ddd}`]);\n  }\n  constructor(activatedRoute, apiService, authService, router) {\n    this.activatedRoute = activatedRoute;\n    this.apiService = apiService;\n    this.authService = authService;\n    this.router = router;\n    this.isLoading = true;\n  }\n  get isLoggedIn() {\n    return this.authService.isLoggedIn;\n  }\n  ngOnInit() {\n    const url = this.router.routerState.snapshot.url;\n    let regExp = /(\\/[a-zA-Z]*)(\\/[a-zA-Z]*\\/)/gm;\n    const result = regExp.exec(url);\n    this.category = result[2];\n    // console.log(result);\n    const id = this.activatedRoute.snapshot.params['picId'];\n    // console.log(id);\n    this.apiService.getPicture(this.category, id).subscribe({\n      next: pic => {\n        this.picture = pic;\n        console.log(this.picture);\n      },\n      error: err => {\n        console.log(`Error: ${err}`);\n      }\n    });\n  }\n  ngOnDestroy() {\n    // this.router.events.unsubscribe();\n  }\n  addPicToCart() {\n    const url = this.router.routerState.snapshot.url;\n    let regExp = /(\\/[a-zA-Z]*)(\\/[a-zA-Z]*\\/)/gm;\n    const result = regExp.exec(url);\n    console.log(result);\n    const id = this.activatedRoute.snapshot.params['picId'];\n    console.log(id);\n    console.log(this.picture);\n    this.apiService.getPicToBeAddToCart(result[2], id).subscribe({\n      next: pic => {\n        this.pictureToCart = pic;\n        // console.log(this.pictureToCart);\n        // this.items.push(this.pictureToCart);\n        this.apiService.createItemInMyCart(this.pictureToCart.picName, this.pictureToCart.picImage, this.pictureToCart.picPrice, this.pictureToCart.picDescription).subscribe({\n          next: id => {\n            console.log(id);\n            this.apiService.getItemFromMyCart(id.name);\n            // .pipe(map(resData => {\n            //   for (const key in resData) {\n            //     if (resData.hasOwnProperty(key)) {\n            //       this.items.push({ picId: key, ...resData[key] })\n            //     }\n            //   }\n            //   return this.items\n            // }))\n          }\n        });\n      },\n\n      error: err => {\n        console.log(`Error: ${err}`);\n      }\n    });\n    // this.apiService.createItem(pisName)\n    window.alert('The picture has been added to the cart!');\n  }\n};\nPictureDetailsComponent = __decorate([Component({\n  selector: 'app-picture-details',\n  templateUrl: './picture-details.component.html',\n  styleUrls: ['./picture-details.component.css']\n})], PictureDetailsComponent);","map":{"version":3,"names":["Component","PictureDetailsComponent","backToList","ddd","router","navigate","constructor","activatedRoute","apiService","authService","isLoading","isLoggedIn","ngOnInit","url","routerState","snapshot","regExp","result","exec","category","id","params","getPicture","subscribe","next","pic","picture","console","log","error","err","ngOnDestroy","addPicToCart","getPicToBeAddToCart","pictureToCart","createItemInMyCart","picName","picImage","picPrice","picDescription","getItemFromMyCart","name","window","alert","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\GitHub JS\\My-Angular-Project1\\src\\app\\pictures\\picture-details\\picture-details.component.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationEnd, Router, RouterEvent } from '@angular/router';\nimport { ApiService } from 'src/app/api.service';\nimport { AuthService } from 'src/app/auth/auth.service';\nimport { IPicture } from 'src/app/shared/interfaces';\n\n@Component({\n  selector: 'app-picture-details',\n  templateUrl: './picture-details.component.html',\n  styleUrls: ['./picture-details.component.css']\n})\nexport class PictureDetailsComponent implements OnInit, OnDestroy {\n\n  picture: IPicture | undefined;\n  isLoading: boolean = true;\n  pictureToCart: IPicture | undefined;\n\n  category: any;\n  \n  // items: IPicture[] = [];\n\n  routerEvents: any;\n\n  backToList(ddd: any): void {\n    this.router.navigate([`/picture/${ddd}`]);\n  }\n\n\n  constructor(private activatedRoute: ActivatedRoute, private apiService: ApiService,\n    private authService: AuthService, private router: Router) {\n  }\n\n  get isLoggedIn(): boolean {\n    return this.authService.isLoggedIn;\n  }\n\n  ngOnInit(): void {\n\n    const url = this.router.routerState.snapshot.url;\n    let regExp = /(\\/[a-zA-Z]*)(\\/[a-zA-Z]*\\/)/gm\n    const result: any = regExp.exec(url);\n    this.category = result[2]\n    // console.log(result);\n\n\n    const id: string = this.activatedRoute.snapshot.params['picId'];\n    // console.log(id);\n\n\n    this.apiService.getPicture(this.category, id).subscribe({\n      next: (pic) => {\n        this.picture = pic;\n        console.log(this.picture);\n\n      },\n      error: (err) => {\n        console.log(`Error: ${err}`);\n      },\n    })\n\n  }\n\n  ngOnDestroy(): void {\n    // this.router.events.unsubscribe();\n  }\n\n  addPicToCart() {\n\n    const url = this.router.routerState.snapshot.url;\n    let regExp = /(\\/[a-zA-Z]*)(\\/[a-zA-Z]*\\/)/gm\n    const result: any = regExp.exec(url);\n    console.log(result);\n\n\n    const id: string = this.activatedRoute.snapshot.params['picId'];\n    console.log(id);\n\n    console.log(this.picture);\n\n    this.apiService.getPicToBeAddToCart(result[2], id)\n      .subscribe({\n        next: (pic) => {\n          this.pictureToCart = pic;\n\n          // console.log(this.pictureToCart);\n          // this.items.push(this.pictureToCart);\n          this.apiService.createItemInMyCart(this.pictureToCart.picName,\n            this.pictureToCart.picImage, this.pictureToCart.picPrice,\n            this.pictureToCart.picDescription)\n            .subscribe({\n              next: (id: any) => {\n                console.log(id);\n                this.apiService.getItemFromMyCart(id.name)\n                  \n\n                // .pipe(map(resData => {\n\n                //   for (const key in resData) {\n                //     if (resData.hasOwnProperty(key)) {\n                //       this.items.push({ picId: key, ...resData[key] })\n                //     }\n                //   }\n                //   return this.items\n                // }))\n              }\n            })\n\n        },\n        error: (err) => {\n          console.log(`Error: ${err}`);\n        }\n      })\n\n\n\n    // this.apiService.createItem(pisName)\n    window.alert('The picture has been added to the cart!');\n  }\n\n  // getItems() {\n  //   return this.items;\n  // }\n\n  // itemsCount() {\n  //   return this.items.length;\n  // }\n\n  // clearCart() {\n  //   this.items = [];\n  // }\n\n  \n\n\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}