{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let AccountComponent = class AccountComponent {\n  constructor(fb, router, authService, activatedRoute) {\n    this.fb = fb;\n    this.router = router;\n    this.authService = authService;\n    this.activatedRoute = activatedRoute;\n    this.showEditMode = false;\n    this.usersDetails = [];\n    this.isLoading = true;\n    // userInfo: IUser | null = null\n    this.userInfo = {\n      userId: '',\n      username: '',\n      firstname: '',\n      secondname: '',\n      lastname: '',\n      email: '',\n      phone: '',\n      country: '',\n      place: '',\n      postcode: '',\n      street: ''\n      // password: '',\n      // rePassword: ''\n    };\n  }\n\n  get isLoggedIn() {\n    return this.authService.isLoggedIn;\n  }\n  ngOnInit() {\n    this.authService.getUserDetails().subscribe({\n      next: user => {\n        this.usersDetails = user;\n        console.log(this.usersDetails);\n        const indexInArrayLoggedinObjectUser = this.usersDetails.findIndex(x => x.username === this.authService.currentUser);\n        const myUserObj = this.usersDetails[indexInArrayLoggedinObjectUser];\n        for (const key in myUserObj) {\n          if (myUserObj.hasOwnProperty(key)) {\n            if (this.userInfo.hasOwnProperty(key)) {\n              this.userInfo[key] = myUserObj[key];\n            }\n          }\n        }\n        console.log(this.userInfo.userId);\n        this.isLoading = false;\n      },\n      error: err => {\n        this.isLoading = false;\n        console.log(`Error: ${err}`);\n      }\n    });\n  }\n  toggleEditMode() {\n    this.showEditMode = !this.showEditMode;\n  }\n  closeAccountForm() {\n    this.router.navigate([\"/auth/profile\"]);\n  }\n};\nAccountComponent = __decorate([Component({\n  selector: 'app-account',\n  templateUrl: './account.component.html',\n  styleUrls: ['./account.component.css']\n})], AccountComponent);\n// userList: IGetUser | undefined;\n//   isLoading: boolean = true;\n//   constructor(private activatedRoute: ActivatedRoute, private authService: AuthService) {}\n//   ngOnInit(): void {\n//     const id: string = this.activatedRoute.snapshot.params['userId'];\n//     console.log(id);\n//     this.authService.getUser(id)\n//     .subscribe({\n//       next: (user) => {\n//         this.userList = user;\n//         console.log(this.userList);\n//         // this.isLoading = false;\n//       },\n//       error: (err) => {\n//         // this.isLoading = false;\n//         console.log(`Error: ${err}`);\n//       },\n//     })\n//   }","map":{"version":3,"names":["Component","AccountComponent","constructor","fb","router","authService","activatedRoute","showEditMode","usersDetails","isLoading","userInfo","userId","username","firstname","secondname","lastname","email","phone","country","place","postcode","street","isLoggedIn","ngOnInit","getUserDetails","subscribe","next","user","console","log","indexInArrayLoggedinObjectUser","findIndex","x","currentUser","myUserObj","key","hasOwnProperty","error","err","toggleEditMode","closeAccountForm","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\GitHub JS\\My-Angular-Project1\\src\\app\\auth\\account\\account.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators, FormControl } from '@angular/forms';\nimport { ActivatedRoute } from '@angular/router';\nimport { Router } from '@angular/router';\nimport { IGetUser, IUser, IUserLog } from 'src/app/shared/interfaces';\nimport { AuthService } from '../auth.service';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-account',\n  templateUrl: './account.component.html',\n  styleUrls: ['./account.component.css']\n})\nexport class AccountComponent implements OnInit {\n\n  showEditMode: boolean = false;\n  usersDetails: IUser[] = [];\n  isLoading: boolean = true;\n  \n\n  // userInfo: IUser | null = null\n  \n\n  userInfo: any = {\n    userId: '',\n    username: '',\n    firstname: '',\n    secondname: '',\n    lastname: '',\n    email: '',\n    phone: '',\n    country: '',\n    place: '',\n    postcode: '',\n    street: '',\n    // password: '',\n    // rePassword: ''\n  };\n\n  \n  \n  constructor(private fb: FormBuilder, private router: Router,\n  private authService: AuthService, private activatedRoute: ActivatedRoute) {\n    \n  }\n\n  get isLoggedIn(): boolean {\n    return this.authService.isLoggedIn;\n  }\n\n  ngOnInit(): void {\n\n    this.authService.getUserDetails()\n    .subscribe({\n      next: (user) => {\n        this.usersDetails= user;\n        console.log(this.usersDetails);\n        const indexInArrayLoggedinObjectUser = this.usersDetails.findIndex(x => \n          x.username === this.authService.currentUser);\n\n          const myUserObj: any = this.usersDetails[indexInArrayLoggedinObjectUser];\n          \n          for(const key in myUserObj) {\n            if (myUserObj.hasOwnProperty(key)) {\n              if(this.userInfo.hasOwnProperty(key)) {\n                this.userInfo[key] = (myUserObj[key]); \n              }\n            }\n          }\n          console.log(this.userInfo.userId);\n          \n        this.isLoading = false;\n      },\n      error: (err) => {\n        this.isLoading = false;\n        console.log(`Error: ${err}`);\n      },\n    })  \n  }\n\n  toggleEditMode(): void {\n    this.showEditMode = !this.showEditMode;\n  }\n\n  \n\n  closeAccountForm(): void {\n    this.router.navigate([\"/auth/profile\"]);\n  }\n}\n\n\n// userList: IGetUser | undefined;\n//   isLoading: boolean = true;\n\n//   constructor(private activatedRoute: ActivatedRoute, private authService: AuthService) {}\n\n//   ngOnInit(): void {\n//     const id: string = this.activatedRoute.snapshot.params['userId'];\n//     console.log(id);\n\n//     this.authService.getUser(id)\n//     .subscribe({\n//       next: (user) => {\n//         this.userList = user;\n//         console.log(this.userList);\n//         // this.isLoading = false;\n//       },\n//       error: (err) => {\n//         // this.isLoading = false;\n//         console.log(`Error: ${err}`);\n//       },\n//     })\n//   }\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAa1C,WAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EA4B3BC,YAAoBC,EAAe,EAAUC,MAAc,EACnDC,WAAwB,EAAUC,cAA8B;IADpD,KAAAH,EAAE,GAAFA,EAAE;IAAuB,KAAAC,MAAM,GAANA,MAAM;IAC3C,KAAAC,WAAW,GAAXA,WAAW;IAAuB,KAAAC,cAAc,GAAdA,cAAc;IA3BxD,KAAAC,YAAY,GAAY,KAAK;IAC7B,KAAAC,YAAY,GAAY,EAAE;IAC1B,KAAAC,SAAS,GAAY,IAAI;IAGzB;IAGA,KAAAC,QAAQ,GAAQ;MACdC,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE;MACR;MACA;KACD;EAOD;;EAEA,IAAIC,UAAUA,CAAA;IACZ,OAAO,IAAI,CAACjB,WAAW,CAACiB,UAAU;EACpC;EAEAC,QAAQA,CAAA;IAEN,IAAI,CAAClB,WAAW,CAACmB,cAAc,EAAE,CAChCC,SAAS,CAAC;MACTC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAI,CAACnB,YAAY,GAAEmB,IAAI;QACvBC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACrB,YAAY,CAAC;QAC9B,MAAMsB,8BAA8B,GAAG,IAAI,CAACtB,YAAY,CAACuB,SAAS,CAACC,CAAC,IAClEA,CAAC,CAACpB,QAAQ,KAAK,IAAI,CAACP,WAAW,CAAC4B,WAAW,CAAC;QAE5C,MAAMC,SAAS,GAAQ,IAAI,CAAC1B,YAAY,CAACsB,8BAA8B,CAAC;QAExE,KAAI,MAAMK,GAAG,IAAID,SAAS,EAAE;UAC1B,IAAIA,SAAS,CAACE,cAAc,CAACD,GAAG,CAAC,EAAE;YACjC,IAAG,IAAI,CAACzB,QAAQ,CAAC0B,cAAc,CAACD,GAAG,CAAC,EAAE;cACpC,IAAI,CAACzB,QAAQ,CAACyB,GAAG,CAAC,GAAID,SAAS,CAACC,GAAG,CAAE;;;;QAI3CP,OAAO,CAACC,GAAG,CAAC,IAAI,CAACnB,QAAQ,CAACC,MAAM,CAAC;QAEnC,IAAI,CAACF,SAAS,GAAG,KAAK;MACxB,CAAC;MACD4B,KAAK,EAAGC,GAAG,IAAI;QACb,IAAI,CAAC7B,SAAS,GAAG,KAAK;QACtBmB,OAAO,CAACC,GAAG,CAAC,UAAUS,GAAG,EAAE,CAAC;MAC9B;KACD,CAAC;EACJ;EAEAC,cAAcA,CAAA;IACZ,IAAI,CAAChC,YAAY,GAAG,CAAC,IAAI,CAACA,YAAY;EACxC;EAIAiC,gBAAgBA,CAAA;IACd,IAAI,CAACpC,MAAM,CAACqC,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;EACzC;CACD;AA5EYxC,gBAAgB,GAAAyC,UAAA,EAL5B1C,SAAS,CAAC;EACT2C,QAAQ,EAAE,aAAa;EACvBC,WAAW,EAAE,0BAA0B;EACvCC,SAAS,EAAE,CAAC,yBAAyB;CACtC,CAAC,C,EACW5C,gBAAgB,CA4E5B;AAGD;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}